name: Build

on:
  workflow_dispatch:

  pull_request:
    branches: [ develop, production ]

jobs:
  core-build:
    name: Build codebase
    uses: ./.github/workflows/core-build.yml
    secrets: inherit

  infra-build:
    name: Build infrastructure
    uses: ./.github/workflows/infra-build.yml
    secrets: inherit

  sonarcloud:
    name: SonarCloud
    uses: ./.github/workflows/core-sonarcloud.yml
    secrets: inherit